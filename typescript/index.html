<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>busyzz</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="minmin">
    
    <link rel="preload" href="/assets/css/0.styles.dfb10f34.css" as="style"><link rel="preload" href="/assets/js/app.340fe0b9.js" as="script"><link rel="preload" href="/assets/js/2.735d95ba.js" as="script"><link rel="preload" href="/assets/js/13.318da7e1.js" as="script"><link rel="prefetch" href="/assets/js/10.d6bc3a05.js"><link rel="prefetch" href="/assets/js/11.1ab48d65.js"><link rel="prefetch" href="/assets/js/12.b869a96d.js"><link rel="prefetch" href="/assets/js/14.63616415.js"><link rel="prefetch" href="/assets/js/15.e771fe0c.js"><link rel="prefetch" href="/assets/js/3.23d69209.js"><link rel="prefetch" href="/assets/js/4.e49b2975.js"><link rel="prefetch" href="/assets/js/5.04afb709.js"><link rel="prefetch" href="/assets/js/6.0ae73ca9.js"><link rel="prefetch" href="/assets/js/7.3469ff95.js"><link rel="prefetch" href="/assets/js/8.914639d0.js"><link rel="prefetch" href="/assets/js/9.bbb9de69.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dfb10f34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/avatar.jpg" alt="busyzz" class="logo"> <span class="site-name can-hide">busyzz</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/typescript/basic.html" class="nav-link">
  Typescript
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/typescript/basic.html" class="nav-link">
  Typescript
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/typescript/basic.html" class="sidebar-link">Typescript基础</a></li><li><a href="/typescript/react.html" class="sidebar-link">React中使用TS</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/hooks.html" class="sidebar-link">react hooks</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>本文主要介绍 TypeScript 基础知识，适用于对 TypeScript 有一段时间了解的开发者，主要包括类型、运算符、操作符、泛型、泛型工具、实践经历，在线的 typescript 练习 <a href="https://www.typescriptlang.org/play?#code/C4TwDgpgBAChBOBnA9gOygXigbwLACgopUBDAWwgC5Fh4BLVAcwG4CBfAggYzRqgCMArohAAvUZThI0mHASKkKlAORCR45eyA" target="_blank" rel="noopener noreferrer">typescript-playground<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="一、类型"><a href="#一、类型" class="header-anchor">#</a> 一、类型</h2> <h3 id="unknown-与-any"><a href="#unknown-与-any" class="header-anchor">#</a> unknown 与 any</h3> <p>unknown 指的是一个未知类型，与 any 不同的是，unknown 类型的变量不能获取变量上面的属性和方法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> name<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> len <span class="token operator">=</span> name<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 静态编译出错</span>

<span class="token keyword">const</span> name<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> len <span class="token operator">=</span> name<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 编译通过</span>
</code></pre></div><p>unknown 可以用于类型保护</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>input<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> input<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 编译通过</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> input<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 编译出错</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="void-与-undefined"><a href="#void-与-undefined" class="header-anchor">#</a> void 与 undefined</h3> <p>在函数的返回类型中 void 和 undefined 功能类似，但是也存在一些区别， undefined 可以看做是 void 的子集，void 表示的是不关注返回值</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">ChildProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> Child<span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span>ChildProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onClick <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Child</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>通过上面的列子可以看出来，当返回类型为 void 的时候，无论 onClick 函数返回什么类型的值都是被允许的，但是将返回值类型设置为 undefined 的时候，onClick 函数必须明确的返回 undefined，所以一般使用的是 void 类型而不是 undefined</p> <h3 id="interfacce-与-type"><a href="#interfacce-与-type" class="header-anchor">#</a> interfacce 与 type</h3> <p>interfacce 与 type 功能相似，大多情况下都可以实现相同的功能：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Animal</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  weight<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Dog</span> <span class="token operator">=</span> Animal <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不同的地方在于 type 可以使用 <code>|</code> , interface 是不可以的，这一点非常有用</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Name</span> <span class="token operator">=</span> <span class="token string">&quot;busyzz&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;qzz&quot;</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</code></pre></div><p>interface 也有一个比较好用的特性，它可以重复声明，并且会自动合并</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Person 的类型为 { name: string, age: number };</span>

<span class="token comment">// 通过该特性为 Window 添加新的类型</span>
<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
    AMap<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 此时去使用 window.AMap 就不会出现类型报错的情况了</span>
</code></pre></div><h3 id="never"><a href="#never" class="header-anchor">#</a> never</h3> <p>never 表示不存在的类型，列子：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token comment">// 实际 A 的类型就是 string</span>
</code></pre></div><h2 id="二、运算符"><a href="#二、运算符" class="header-anchor">#</a> 二、运算符</h2> <h3 id="非空断言运算符"><a href="#非空断言运算符" class="header-anchor">#</a> 非空断言运算符 !</h3> <p>! 运算符用来告诉 typescript 对应的值是非 null | undefined 的 , 只能作用在 <code>编译阶段</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> len <span class="token operator">=</span> name<span class="token operator">!</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</code></pre></div><p>经过编译后：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> len <span class="token operator">=</span> name<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</code></pre></div><p>可以看到编译后的代码并没有任何变化，如果想做 <code>运行时</code> 的非空判断需要用到 <code>?.</code></p> <h3 id="可选运算符"><a href="#可选运算符" class="header-anchor">#</a> 可选运算符 ?.</h3> <p>相比于 ！作用于编译阶段，那么 ?. 就是更重要的运行时非空判断</p> <p>有这样一个场景，我们获取到后端返回的一个对象，需要去取这个对象的 name 属性，但是这个对象可能为 null，所以需要做一个非空判断，不然会导致运行时报错，空指针异常</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> obj<span class="token punctuation">;</span>
obj<span class="token operator">?.</span>name<span class="token punctuation">;</span>
obj<span class="token operator">?.</span>say<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="与"><a href="#与" class="header-anchor">#</a> ?? 与 ||</h3> <p>?? 与 || 功能相似，但是 ?? 只有在 左侧的值为 <code>null</code> | <code>undefined</code> 才会返回右侧的值， || 只要左侧的值为 <code>false</code> <code>NaN</code> <code>0</code> 等 <code>假值</code> 都会执行右侧逻辑</p> <h3 id="交叉类型"><a href="#交叉类型" class="header-anchor">#</a> &amp; 交叉类型</h3> <p>交叉类型是将多个类型合并成一个类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> <span class="token constant">T1</span> <span class="token operator">&amp;</span> <span class="token constant">T2</span><span class="token punctuation">;</span> <span class="token comment">// T3 的类型为 { id:string, name:string }</span>
</code></pre></div><p>需要注意的是当两个类型进行交叉合并的时候，如果有相同的属性但是类型却不相同，或者一个可选一个必选的情况：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> <span class="token constant">T1</span> <span class="token operator">&amp;</span> <span class="token constant">T2</span><span class="token punctuation">;</span> <span class="token comment">// T3 的类型为 { id:string; name:never }</span>
<span class="token comment">// 当有相同属性 name 的时候，他们合并以后的类型为他们的交集, 因为 string 和 number 并没有交集,所以 name 的类型为 never</span>
<span class="token comment">// 当 id 一个为可选，一个为必选时，合并以后的 id 为必选</span>
</code></pre></div><p>现在的情况是 T1 和 T2 中的 name 为基础类型，所以是取交集，但是如果是非基础类型就会合并了</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token punctuation">{</span>
  person<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token punctuation">{</span>
  person<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> <span class="token constant">T1</span> <span class="token operator">&amp;</span> <span class="token constant">T2</span><span class="token punctuation">;</span> <span class="token comment">// T3 的类型为 { person:{ name:string; age: number } }</span>
</code></pre></div><h3 id="数字分隔符"><a href="#数字分隔符" class="header-anchor">#</a> 数字分隔符 _</h3> <p>为了更清楚的分割一个比较长的数字，编译以后不会有任何变化</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token number">1_234_567</span><span class="token punctuation">;</span>
<span class="token comment">// 编译以后 var total = 1234567</span>
</code></pre></div><h2 id="三、操作符"><a href="#三、操作符" class="header-anchor">#</a> 三、操作符</h2> <h3 id="获取键值-keyof"><a href="#获取键值-keyof" class="header-anchor">#</a> 获取键值 keyof</h3> <p>keyof 用于获取一个类型的所有键值，并返回这些键值组成的联合类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  gender<span class="token operator">:</span> <span class="token string">&quot;male&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;female&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">PersonKeys</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">;</span> <span class="token comment">// PersonKeys 的类型为 'name' | 'age' | 'gender'</span>
</code></pre></div><h3 id="获取对象的类型-typeof"><a href="#获取对象的类型-typeof" class="header-anchor">#</a> 获取对象的类型 typeof</h3> <p>typeof 可以获取一个对象的具体类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">27</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> person<span class="token punctuation">;</span> <span class="token comment">// Person 的类型为 { name: string; age: number; }</span>
</code></pre></div><h3 id="遍历操作-in"><a href="#遍历操作-in" class="header-anchor">#</a> 遍历操作 in</h3> <p>in 用于遍历一组联合类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">TypeNumber</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key <span class="token keyword">in</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj<span class="token operator">:</span> TypeNumber <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">123</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="类型保护-is"><a href="#类型保护-is" class="header-anchor">#</a> 类型保护 is</h3> <p>is 用于做类型保护时使用,当函数的参数可能有多个类型的时候就需要做类型保护，先来看一个简单的类型保护列子：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 编译通过</span>
  <span class="token punctuation">}</span>
  x<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 编译不通过 因为当 x 为 number 类型的时候不存在 substr 方法</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当一个类型不能简单的使用 typeof 去判断的时候，就需要用到 is 了，它可以根据一些复杂的逻辑来判断参数是否是指定的类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isPlainObject</span><span class="token punctuation">(</span>input<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> input <span class="token keyword">is</span> Record<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果是普通对象类型返回它的键值，否则返回自身</span>
<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span>input<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> input<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="四、泛型"><a href="#四、泛型" class="header-anchor">#</a> 四、泛型</h2> <h3 id="基础使用"><a href="#基础使用" class="header-anchor">#</a> 基础使用</h3> <p>泛型指的是一个不确定的类型，在使用某个类型或者调用某个方法的时候动态的传入进去</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 类型</span>
<span class="token keyword">type</span> <span class="token class-name">Type<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> type<span class="token operator">:</span> Type<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> type2<span class="token operator">:</span> Type<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 定义方法</span>
<span class="token keyword">const</span> func <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">;</span>
<span class="token comment">// 调用方法</span>
<span class="token generic-function"><span class="token function">func</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在这个列子中也可以不传入 &lt;string&gt; , ts 可以自动推导出泛型的具体类型 T 为 string</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="泛型约束"><a href="#泛型约束" class="header-anchor">#</a> 泛型约束</h3> <p>通过 <code>extends</code> 对传入的泛型进行约束</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">test</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token string">&quot;x&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;y&quot;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>input<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> input<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用 test 函数的时候 泛型 T 只能传入 'x' | 'y' 的子类型</span>
</code></pre></div><h3 id="泛型条件"><a href="#泛型条件" class="header-anchor">#</a> 泛型条件</h3> <p>通过 <code>extends</code> 对类型做一个三元运算</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Test<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;age&quot;</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token comment">// Test&lt;'name'&gt; 返回类型 'name'</span>
<span class="token comment">// Test&lt;number&gt; 返回类型 never</span>
</code></pre></div><p>需要特别注意的是，当 <code>extends</code> 左侧是一个具体的类型，或者左侧是一个泛型的时候，情况是不一样的：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 具体的类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> <span class="token string">&quot;x&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;y&quot;</span> <span class="token keyword">extends</span> <span class="token string">&quot;x&quot;</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// T1 的类型为 2</span>
<span class="token comment">// 泛型</span>
<span class="token keyword">type</span> <span class="token class-name">Test<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token string">&quot;x&quot;</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Test<span class="token operator">&lt;</span><span class="token string">&quot;x&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;y&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T2 的类型为 1 | 2</span>
</code></pre></div><p>当 extends 左侧为泛型的时候 ，会将 泛型 T 中的类型逐个判断，最后返回他们的联合类型，如果不想被逐个判断可以这样做：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Test<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Test<span class="token operator">&lt;</span><span class="token string">&quot;x&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;y&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 此时 T2 的类型为 2</span>
</code></pre></div><h3 id="泛型推断-infer"><a href="#泛型推断-infer" class="header-anchor">#</a> 泛型推断 infer</h3> <p>infer 表示类型推断的意思，一般使用在 <code>泛型条件</code> 中和 extends 一起使用</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Foo<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">P</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">P</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token comment">// type Foo&lt;{name:string}&gt; 返回的类型为 string;</span>
<span class="token comment">// type Foo&lt;{name:number}&gt; 返回的类型为 number;</span>
</code></pre></div><h2 id="五、内置泛型"><a href="#五、内置泛型" class="header-anchor">#</a> 五、内置泛型</h2> <h3 id="partial-t"><a href="#partial-t" class="header-anchor">#</a> <code>Partial&lt;T&gt;</code></h3> <p>将泛型内的所有属性设置为可选的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 具体实现</span>
<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 通过 Partial 包裹以后的类型为 { name?:string; age?: number };</span>
<span class="token keyword">const</span> person<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="record-k-t"><a href="#record-k-t" class="header-anchor">#</a> <code>Record&lt;K,T&gt;</code></h3> <p>将 K 中的属性全部设置为 T 类型，通常用它来申明一个普通 Object 对象</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 具体实现</span>
<span class="token keyword">type</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> record<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token string">&quot;a&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> Person<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">23</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;zzb&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这里的 <code>keyof any</code> 对应的类型为 <code>string | number | symbol</code></p> <h3 id="pick-t-k"><a href="#pick-t-k" class="header-anchor">#</a> <code>Pick&lt;T,K&gt;</code></h3> <p>选择一个类型中的一个或多个属性</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 实现</span>
<span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person<span class="token operator">:</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person<span class="token operator">:</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">27</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="exclude-t-u"><a href="#exclude-t-u" class="header-anchor">#</a> <code>Exclude&lt;T,U&gt;</code></h3> <p>从 T 联合类型中去除 T 和 U 的交集</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 实现</span>
<span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">&quot;a&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'c'</span>
</code></pre></div><h3 id="extract-t-u"><a href="#extract-t-u" class="header-anchor">#</a> <code>Extract&lt;T,U&gt;</code></h3> <p>从 T 联合类型中提取 T 和 U 的交集</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 实现</span>
<span class="token keyword">type</span> <span class="token class-name">Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token string">&quot;a&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'a' | 'b'</span>
</code></pre></div><h3 id="omit-t-u"><a href="#omit-t-u" class="header-anchor">#</a> <code>Omit&lt;T,U&gt;</code></h3> <p>从一个类型中删除一个或多个属性</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 具体实现</span>
<span class="token keyword">type</span> <span class="token class-name">Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Exclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  gender<span class="token operator">:</span> <span class="token string">&quot;male&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;female&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;gender&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T1 的类型为 { age: number }</span>
</code></pre></div><h3 id="returntype-t"><a href="#returntype-t" class="header-anchor">#</a> <code>ReturnType&lt;T&gt;</code></h3> <p>传入一个函数类型，获取该函数类型的返回值类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 具体实现</span>
<span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T1 的类型为 { name: string; age: number }</span>

<span class="token comment">// 获取一个函数实例的返回值</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> test<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T2 的类型为 number</span>
</code></pre></div><p>在使用 <code>redux</code> 的时候可以将 <code>reducer</code> 函数传入 <code>ReturnType&lt;typeof reducer&gt;</code> 获取到 <code>state</code> 的类型</p> <h3 id="required-t"><a href="#required-t" class="header-anchor">#</a> <code>Required&lt;T&gt;</code></h3> <p>将 T 中的所有属性设置为必选</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 实现</span>
<span class="token keyword">type</span> <span class="token class-name">IRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> IRequired<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T 的类型为 { name: string; age:number  }</span>
</code></pre></div><p><code>-?:</code> 可以看做是删除掉可选项，然后属性就变成必选了</p> <h3 id="promise-t"><a href="#promise-t" class="header-anchor">#</a> <code>Promise&lt;T&gt;</code></h3> <p>Promise 中的 T 代表的是 调用 resolve 方法时传入的值的类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;busyzz&quot;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">26</span>
      <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="六、自定义的一些常用类型"><a href="#六、自定义的一些常用类型" class="header-anchor">#</a> 六、自定义的一些常用类型</h2> <h3 id="withoptional-t-k"><a href="#withoptional-t-k" class="header-anchor">#</a> <code>WithOptional&lt;T,K&gt;</code></h3> <p>将部分属性设置为可选</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 具体实现</span>
<span class="token keyword">type</span> <span class="token class-name">WithOptional<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> WithOptional<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// T 的类型为 { name:string , age?:number }</span>
</code></pre></div><h3 id="weaken-t-k"><a href="#weaken-t-k" class="header-anchor">#</a> <code>Weaken&lt;T,K&gt;</code></h3> <p>有些时候我们可能需要重写一个库提供的 interface 的某个属性，但是重写的时候可能会导致冲突：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Test2</span> <span class="token keyword">extends</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 编译失败</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这个时候 ts 会报错，提示 不能将 string | number 类型分配给 string 类型</span>

<span class="token comment">// 使用 Weaken 来解决</span>
<span class="token keyword">type</span> <span class="token class-name">Weaken<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">?</span> <span class="token builtin">any</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Test2</span> <span class="token keyword">extends</span> <span class="token class-name">Weaken<span class="token operator">&lt;</span>Test<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// 编辑通过</span>
</code></pre></div><h3 id="combine-t-u-m"><a href="#combine-t-u-m" class="header-anchor">#</a> <code>Combine&lt;T,U,M...&gt;</code></h3> <p>用于合并多个类型，当你要合并多个类型的时候需要 A &amp; B &amp; C &amp; D ,可以使用 Combine 来简化</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Combine<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token constant">M</span> <span class="token operator">=</span> <span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token operator">=</span> <span class="token builtin">never</span><span class="token punctuation">,</span> <span class="token constant">E</span> <span class="token operator">=</span> <span class="token builtin">never</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span>
  <span class="token constant">U</span> <span class="token operator">&amp;</span>
  <span class="token constant">M</span> <span class="token operator">&amp;</span>
  <span class="token constant">K</span> <span class="token operator">&amp;</span>
  <span class="token constant">E</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Test</span> <span class="token operator">=</span> Combine<span class="token operator">&lt;</span><span class="token constant">T1</span><span class="token punctuation">,</span> <span class="token constant">T2</span><span class="token punctuation">,</span> <span class="token constant">T3</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deeppartial-t"><a href="#deeppartial-t" class="header-anchor">#</a> <code>DeepPartial&lt;T&gt;</code></h3> <p>Partial 只能将一个类型的第一层属性设置为可选，更深层无法设置</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Goods</span> <span class="token punctuation">{</span>
  size<span class="token operator">:</span> <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    weight<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> g1<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Goods<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  size<span class="token operator">:</span> <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">123</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 编译报错 缺少 weight 属性</span>

<span class="token keyword">type</span> <span class="token class-name">DeepPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Function</span></span>
  <span class="token operator">?</span> <span class="token constant">T</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span>
  <span class="token operator">?</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> DeepPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> g1<span class="token operator">:</span> DeepPartial<span class="token operator">&lt;</span>Goods<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  size<span class="token operator">:</span> <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">123</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 编译通过</span>
</code></pre></div><h2 id="七、其他"><a href="#七、其他" class="header-anchor">#</a> 七、其他</h2> <h3 id="文件-d-ts"><a href="#文件-d-ts" class="header-anchor">#</a> 文件 <code>.d.ts</code></h3> <p>以 <code>.d.ts</code> 结尾的，我通常是用来声明一些全局的类型，如 window 上的扩展类型，服务端返回的数据类型，一般会在根目录下面创建一个 <code>typings</code> 文件夹，目录结构：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">|</span><span class="token operator">--</span> typings
    <span class="token operator">|</span><span class="token operator">--</span> global<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts <span class="token comment">// 全局的类型声明</span>
    <span class="token operator">|</span><span class="token operator">--</span> api<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts <span class="token comment">// 服务端返回的类型</span>
</code></pre></div><p><code>global.d.ts</code> :</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
  AMap<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>api.d.ts</code> :</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">namespace</span> Api <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Goods</span> <span class="token punctuation">{</span>
    price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    size<span class="token operator">:</span> <span class="token string">&quot;m&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;l&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;xl&quot;</span><span class="token punctuation">;</span>
    url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    phone<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在需要的地方直接使用,不需要再通过 import 引入了</span>
<span class="token keyword">const</span> <span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>Api<span class="token punctuation">.</span>Goods<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="json-to-ts"><a href="#json-to-ts" class="header-anchor">#</a> JSON to TS</h3> <p>有些时候我们需要将一个 json 数据转换为对应的 typescript 类型文件，可以使用这个在线转换的网站：</p> <p><a href="https://apihelper.jccore.cn/jsontool" target="_blank" rel="noopener noreferrer">json2Typescript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="搜索某个库的类型声明文件"><a href="#搜索某个库的类型声明文件" class="header-anchor">#</a> 搜索某个库的类型声明文件</h3> <p><a href="https://www.typescriptlang.org/dt/search?search=" target="_blank" rel="noopener noreferrer">DefinitelyTyped<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <!----></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.340fe0b9.js" defer></script><script src="/assets/js/2.735d95ba.js" defer></script><script src="/assets/js/13.318da7e1.js" defer></script>
  </body>
</html>
